<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ProgettoAPL.ViewModels"
             x:Class="ProgettoAPL.Views.TaskPage"
             BackgroundColor="#2C3E50">
    <ContentPage.BindingContext>
        <vm:TaskViewModel />
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto,*,Auto"
             BackgroundColor="#F3F4F6">
        <!-- Barra Superiore con Titolo e Icone -->
        <Grid RowDefinitions="Auto"
                 BackgroundColor="#2C3E50"
                 Padding="10"
                 VerticalOptions="Start">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Titolo -->
            <Label Text="CoAuthLab - Task"
                      FontSize="24"
                      TextColor="White"
                      FontAttributes="Bold"
                      VerticalTextAlignment="Center"
                      Grid.Column="0"/>

            <!-- Icona Profilo -->
            <ImageButton Source="profile_icon.png"
                            Command="{Binding ProfileCommand}"
                            WidthRequest="40"
                            HeightRequest="40"
                            BackgroundColor="Transparent"
                            BorderColor="Transparent"
                            Grid.Column="1"
                            Margin="5"/>

            <!-- Icona Logout -->
            <ImageButton Source="logout_icon.png"
                            Command="{Binding LogoutCommand}"
                            WidthRequest="30"
                            HeightRequest="40"
                            BackgroundColor="Transparent"
                            BorderColor="Transparent"
                            Grid.Column="2"
                            Margin="5"/>
        </Grid>

        <!-- Contenuto Principale -->
        <ScrollView Grid.Row="1" Padding="20">
            <StackLayout Spacing="20">
                <!-- Blocco rettangolare per la descrizione e i dettagli del task -->
                <Frame BackgroundColor="#5387a5"
                    CornerRadius="10"
                    Padding="15"
                    HasShadow="True">
                    <StackLayout>
                        <HorizontalStackLayout>
                        <Label Text="{Binding TaskDescription}"
                               FontSize="30"
                               TextColor="White"
                               FontAttributes="Bold"/>
                        <Label Text="{Binding TaskComments}"
                               FontSize="17"
                               TextColor="White"
                               VerticalTextAlignment="Center"
                               Margin="10,5,0,0"/>
                        </HorizontalStackLayout>
                        <Label Text="{Binding TaskAuthor, StringFormat='Autore: {0}'}"
                               FontSize="14"
                               TextColor="White"/>
                        <Label Text="{Binding AssignedUser, StringFormat='Incaricato: {0}'}"
                               FontSize="14"
                               TextColor="White"/>          
                        <CheckBox IsChecked="{Binding TaskCompleted}"
                          VerticalOptions="Start"
                          HorizontalOptions="End"
                          Grid.Column="1"
                          Margin="10"/>
                    </StackLayout>
                </Frame>
            </StackLayout>
        </ScrollView>

        <!-- Footer -->
        <Label Text="2024 CoAuthLab. Tutti i diritti riservati."
                  FontSize="12"
                  HorizontalOptions="Center"
                  VerticalOptions="Center"
                  TextColor="#555555"
                  Grid.Row="2"
                  Margin="10"/>
    </Grid>
</ContentPage>
