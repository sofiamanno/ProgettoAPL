<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:ProgettoAPL.ViewModels"
             x:Class="ProgettoAPL.Views.HomePage">

    <Grid RowDefinitions="Auto,*,Auto"
          BackgroundColor="#F3F4F6">
        <!-- Barra Superiore con Titolo e Icone -->
        <Grid RowDefinitions="Auto"
              BackgroundColor="#2C3E50"
              Padding="10"
              VerticalOptions="Start">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Titolo -->
            <Label Text="CoAuthLab - Home Page"
                   FontSize="24"
                   TextColor="White"
                   FontAttributes="Bold"
                   VerticalTextAlignment="Center"
                   Grid.Column="0"/>

            <!-- Icona Profilo -->
            <ImageButton Source="profile_icon.png"
                         Command="{Binding ProfileCommand}"
                         WidthRequest="40"
                         HeightRequest="40"
                         BackgroundColor="Transparent"
                         BorderColor="Transparent"
                         Grid.Column="1"
                         Margin="5"/>

            <!-- Icona Logout -->
            <ImageButton Source="logout_icon.png"
                         Command="{Binding LogoutCommand}"
                         WidthRequest="30"
                         HeightRequest="40"
                         BackgroundColor="Transparent"
                         BorderColor="Transparent"
                         Grid.Column="2"
                         Margin="5"/>
        </Grid>

        <!-- Contenuto Principale -->
        <ScrollView Grid.Row="1" Padding="20">

            <StackLayout Spacing="20">

                <!-- Pulsante Crea Nuovo Progetto -->
                <Button Text="➕ Crea Nuovo Progetto"
                        Command="{Binding NewProjectCommand}"
                        BackgroundColor="#3498DB"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="10"
                        HeightRequest="50"/>

                <!-- Titolo Progetti -->
                <Label Text="I tuoi progetti"
                       FontSize="22"
                       TextColor="#333333"
                       FontAttributes="Bold"
                       Margin="0,10,0,0"/>

                <!-- Lista dei Progetti -->
                <CollectionView ItemsSource="{Binding Progetti}"
                                SelectionMode="Single">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="White"
                                   CornerRadius="15"
                                   Padding="15"
                                   Margin="5">
                                <VerticalStackLayout>
                                    <Label Text="{Binding Nome}"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#333333" />
                                    <Label Text="{Binding CreatoDa, StringFormat='Creato da: {0}'}"
                                           FontSize="14"
                                           TextColor="#777777"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>
        </ScrollView>

        <!-- Footer -->
        <Label Text="© 2024 CoAuthLab. Tutti i diritti riservati."
               FontSize="12"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               TextColor="#555555"
               Grid.Row="2"
               Margin="10"/>
    </Grid>
</ContentPage>